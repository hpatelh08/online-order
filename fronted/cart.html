<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Menu and Cart</title>
<style>
    body {
        font-family: Arial, sans-serif;
        padding: 20px;
    }
    h2 {
        margin-top: 40px;
    }
    .category {
        border: 1px solid #ccc;
        padding: 10px;
        margin-bottom: 15px;
        border-radius: 8px;
    }
    .item {
        display: flex;
        align-items: center;
        margin-bottom: 8px;
    }
    .item img {
        width: 80px;
        height: 80px;
        object-fit: cover;
        margin-right: 10px;
    }
    button {
        padding: 5px 10px;
        margin-left: 10px;
        cursor: pointer;
        border: none;
        background-color: #4CAF50;
        color: white;
        border-radius: 4px;
    }
    #cart {
        border: 1px solid #888;
        padding: 10px;
        margin-top: 20px;
        border-radius: 8px;
    }
    #cart-items {
        max-height: 200px;
        overflow-y: auto;
        margin-bottom: 10px;
    }
    #totalPrice {
        font-weight: bold;
    }
    #payment-section {
        display: none;
        margin-top: 20px;
        border: 1px dashed #888;
        padding: 10px;
        border-radius: 8px;
    }
    input[type="text"], select {
        padding: 5px;
        margin-right: 10px;
        border-radius: 4px;
        border: 1px solid #ccc;
    }
</style>
</head>
<body>

<h1>Menu Categories</h1>

<!-- Table Number Input -->
<label for="tableNumber">Enter your table number (3 digits): </label>
<input type="text" id="tableNumber" maxlength="3" pattern="\d{3}" placeholder="e.g., 123" />
<button onclick="validateTable()">Confirm</button>
<p id="tableMsg" style="color:red;"></p>

<h2>Menu Items</h2>

<div class="category" id="packets">
    <h3>Packets</h3>
    <div class="item">
        <img src="https://via.placeholder.com/80" alt="Kurkure"/>
        <div>
            <p>Kurkure - Rs.20</p>
            <button onclick="addToCart('Packets', 'Kurkure', 20)">Add</button>
        </div>
    </div>
    <!-- Additional items can be added here -->
</div>

<div class="category" id="launch">
    <h3>Launch</h3>
    <div class="item">
        <img src="https://via.placeholder.com/80" alt="Launch"/>
        <div>
            <p>Launch Item - Rs.50</p>
            <button onclick="addToCart('Launch', 'Launch Item', 50)">Add</button>
        </div>
    </div>
</div>

<div class="category" id="breakfast">
    <h3>Breakfast</h3>
    <div class="item">
        <img src="https://via.placeholder.com/80" alt="Breakfast"/>
        <div>
            <p>Breakfast Item - Rs.30</p>
            <button onclick="addToCart('Breakfast', 'Breakfast Item', 30)">Add</button>
        </div>
    </div>
</div>

<h2>Your Cart</h2>
<div id="cart">
    <div id="cart-items"></div>
    <p id="totalPrice">Total: Rs.0</p>
</div>

<button onclick="showPaymentOptions()">Proceed to Payment</button>

<div id="payment-section">
    <h3>Select Payment Method</h3>
    <button onclick="onlinePayment()">Online Payment</button>
    <button onclick="cashPayment()">Cash Payment</button>

    <div id="online-payment" style="display:none; margin-top:10px;">
        <label for="upiId">Enter your UPI ID:</label>
        <input type="text" id="upiId" placeholder="e.g., username@bank"/>
        <button onclick="simulateUPIPayment()">Pay</button>
        <p id="upiMsg" style="color:green;"></p>
    </div>
    <div id="cash-payment-info" style="margin-top:10px; display:none;">
        <p>Go to counter, give money, and get invoice!</p>
    </div>
    <div id="order-summary" style="margin-top:10px; color:blue;"></div>
</div>

<script>
    let cartItems = [];
    let totalPrice = 0;
    let orderNumber = 1000; // Starting order number
    let paymentMode = '';

    function validateTable() {
        const tableInput = document.getElementById('tableNumber');
        const msg = document.getElementById('tableMsg');
        const val = tableInput.value.trim();
        if (/^\d{3}$/.test(val)) {
            msg.textContent = "Table number accepted!";
        } else {
            msg.textContent = "Please enter a valid 3-digit number.";
        }
    }

    function addToCart(category, itemName, price) {
        cartItems.push({category, itemName, price});
        updateCartDisplay();
    }

    function updateCartDisplay() {
        const cartDiv = document.getElementById('cart-items');
        cartDiv.innerHTML = '';

        let total = 0;
        cartItems.forEach((item, index) => {
            total += item.price;
            const div = document.createElement('div');
            div.textContent = `${item.itemName} (${item.category}) - Rs.${item.price}`;
            // Optional: add remove button
            cartDiv.appendChild(div);
        });
        document.getElementById('totalPrice').textContent = `Total: Rs.${total}`;
        totalPrice = total;
    }

    function showPaymentOptions() {
        if (cartItems.length === 0) {
            alert('Please add items to cart.');
            return;
        }
        document.getElementById('payment-section').style.display = 'block';
        document.getElementById('online-payment').style.display = 'none';
        document.getElementById('cash-payment-info').style.display = 'none';
        document.getElementById('order-summary').innerHTML = '';
        document.getElementById('upiMsg').textContent = '';
        document.getElementById('upiId').value = '';
    }

    function onlinePayment() {
        paymentMode = 'Online';
        document.getElementById('online-payment').style.display = 'block';
        document.getElementById('cash-payment-info').style.display = 'none';
        document.getElementById('upiMsg').textContent = '';
    }

    function cashPayment() {
        paymentMode = 'Cash';
        document.getElementById('online-payment').style.display = 'none';
        document.getElementById('cash-payment-info').style.display = 'block';
        document.getElementById('order-summary').innerHTML = '';
    }

    function simulateUPIPayment() {
        const upiId = document.getElementById('upiId').value.trim();
        if (upiId === '') {
            alert('Please enter your UPI ID.');
            return;
        }
        document.getElementById('upiMsg').textContent = `Payment of Rs.${totalPrice} successful via UPI ID: ${upiId}`;
        generateOrder('Online');
    }

    function generateOrder(mode) {
        // Generate a dynamic order number
        orderNumber++;
        const orderNum = orderNumber;
        // Show invoice
        const invoice = `
        <h4>Order Confirmed!</h4>
        <p>Order Number: ${orderNum}</p>
        <p>Items:</p>
        <ul>
            ${cartItems.map(i => `<li>${i.itemName} (${i.category}) - Rs.${i.price}</li>`).join('')}
        </ul>
        <p>Total: Rs.${totalPrice}</p>
        <p>Payment Mode: ${mode}</p>`;

        document.getElementById('order-summary').innerHTML = invoice;

        // Reset cart
        cartItems = [];
        totalPrice = 0;
        updateCartDisplay();
        // Reset payment section
        document.getElementById('payment-section').style.display = 'none';
    }
</script>

</body>
</html>